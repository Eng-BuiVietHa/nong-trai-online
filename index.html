<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Vietnam Farm Live</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.min.js"></script>
    <style>
        body { background: #000; color: #0f0; font-family: sans-serif; text-align: center; margin-top: 50px; }
        #value { font-size: 100px; font-weight: bold; }
        .status { color: #888; font-size: 12px; }
    </style>
</head>
<body>
    <h1>VN FARM MONITOR</h1>
    <div id="value">--</div>
    <div class="status" id="status">Connecting...</div>

    <script>
        const TOPIC = "duan_nongnghiep_vn_usa_9999"; 
        const BROKER = "broker.hivemq.com";
        const PORT = 8000;
        const CLIENT_ID = "web_" + Math.random().toString(16).substr(2, 8);

        const client = new Paho.MQTT.Client(BROKER, PORT, CLIENT_ID);

        client.onMessageArrived = function (message) {
            document.getElementById("value").innerText = message.payloadString;
            document.getElementById("status").innerText = "LIVE: " + new Date().toLocaleTimeString();
        };

        client.connect({
            onSuccess: function () {
                document.getElementById("status").innerText = "Connected!";
                client.subscribe(TOPIC);
            },
            useSSL: false
        });
    </script>
</body>
</html>